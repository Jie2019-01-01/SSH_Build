<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE struts PUBLIC
    "-//Apache Software Foundation//DTD Struts Configuration 2.5//EN"
    "http://struts.apache.org/dtds/struts-2.5.dtd">
<struts>
    <!-- <constant name="struts.objectFactory" value="spring" /> -->
    <constant name="struts.devMode" value="true"/>
    <constant name="struts.ui.theme" value="simple"/>
    <package name="default" namespace="/" extends="struts-default">
    	<!-- 声明拦截器 -->
    	<interceptors>
    		<!-- 自定义拦截器 -->
    		<interceptor name="loginInterceptor" class="cn.itcast.erp.utils.interceptor.LoginInterceptor"/>
    		<!-- 拦截器栈，引用默认拦截器栈和自定义拦截器 -->
    		<interceptor-stack name="myStack">
    			<interceptor-ref name="loginInterceptor"/>
    			<interceptor-ref name="defaultStack"/>
    		</interceptor-stack>
    	</interceptors>
    	<!-- 引用拦截器栈 -->
    	<default-interceptor-ref name="myStack"/>
    	
    	<!--对于struts拦截器出现的结果集，必须与全局result匹配 -->
 		<global-results>
 			<result name="noLogin">/WEB-INF/jsps/login.jsp</result>
 		</global-results>
 		
    	<!-- page -->
    	<action name="page_*">
    		<result>/WEB-INF/jsps/{1}.jsp</result>
    		<allowed-methods>execute</allowed-methods>
    	</action>
    	
    	<!-- Dep -->
    	<action name="dep_*" class="depAction" method="{1}">
    		<result name="list">/WEB-INF/jsps/dep/list.jsp</result>
    		<result name="toList" type="redirectAction">
    			<param name="actionName">dep_list</param>
    			<param name="pageNum">${pageNum}</param>
    		</result>
    		<result name="input">/WEB-INF/jsps/dep/input.jsp</result>
    			<!-- 通配符不要忘记加allowed-methods -->
    		<allowed-methods>list,input,save</allowed-methods>
    	</action>
    	
    	<!-- Emp -->
    	<action name="emp_*" class="empAction" method="{1}">
    			<!-- 结果跳转 -->
    		<result name="loginFail">/WEB-INF/jsps/login.jsp</result>
    		<result name="loginSuccess">/WEB-INF/jsps/main.jsp</result>
    			<!-- struts2.5版本使用通配符必须加上这个 -->
    		<allowed-methods>login</allowed-methods>
    	</action>
    </package>
</struts>